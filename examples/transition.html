<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Map</title>
    <script type="text/javascript" src="../js/jquery-1.7.min.js"></script>
    <script type="text/javascript" src="../js/jquery.hotkeys.js"></script>
    <script type="text/javascript" src="../js/jquery.mousewheel.js"></script>

    <script type="text/javascript" src="../webgl_maps.js"></script>
    <script type="text/javascript" src="../js/geojson.js"></script>
    <script type="text/javascript" src="../js/ascii.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/screen.css" />
    <script type="text/javascript">
    $ (document).ready (function () {
	var map = new Map (null, {
	    //base: null,
	    desaturate: 1.0,
	    background: new Color (10, 10, 10, 255),
	    center: new vect (0, 0),
	    extents: 360,
	});

	var ramp = [
	    new Color (69, 117, 180, 225),
	    new Color (145, 191, 219, 225),
	    new Color (224, 243, 248, 225),
	    new Color (254, 224, 144, 225),
	    new Color (252, 141, 89, 225),
	    new Color (215, 48, 39, 225),
	];
	
	$.ajax ({
	    url: 'data/precip_1.asc',
	    dataType: 'text',
	    success: function (data) {
		world_rain = AsciiGrid (data, {
		    ramp: ramp,
		    map: function (min, max, val) {
			if (isNaN (val))
			    return 0;
			var tol = (max - min) * .05;
			var p = (val - (min - tol)) / (max - min + 2 * tol);
			return Math.floor (p * (ramp.length - 1));
		    },
		    blur: true
		});
		map.append (world_rain);
	    }	
	});
    });
</script>

  </head>
  <body>
  </body>
</html>
